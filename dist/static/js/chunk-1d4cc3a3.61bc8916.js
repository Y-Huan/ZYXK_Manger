(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d4cc3a3"],{3789:function(e,t,r){"use strict";r("90c5")},"90c5":function(e,t,r){},e382:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"search_box"},[r("el-input",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:"用户名"},model:{value:e.user_name,callback:function(t){e.user_name="string"===typeof t?t.trim():t},expression:"user_name"}}),r("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"手机号码",maxlength:"11"},model:{value:e.user_phone,callback:function(t){e.user_phone="string"===typeof t?t.trim():t},expression:"user_phone"}}),2==e.userInfo.type?r("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"角色"},model:{value:e.roleId,callback:function(t){e.roleId=t},expression:"roleId"}},e._l(e.roleList,(function(e){return r("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1):e._e(),3==e.userInfo.type?r("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"公司名称"},model:{value:e.company_name,callback:function(t){e.company_name="string"===typeof t?t.trim():t},expression:"company_name"}}):e._e(),3==e.userInfo.type?r("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"用户类型"},model:{value:e.user_type,callback:function(t){e.user_type=t},expression:"user_type"}},e._l(e.type_list,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1):e._e(),r("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"状态"},model:{value:e.isEnable,callback:function(t){e.isEnable=t},expression:"isEnable"}},e._l(e.status_list,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1),r("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.creat_time,callback:function(t){e.creat_time=t},expression:"creat_time"}}),r("el-button-group",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getList(1)}}},[e._v("搜索")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-right"},on:{click:e.restParams}},[e._v("重置")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.open_add_user}},[e._v("新增")])],1)],1),r("div",{staticClass:"table_box"},[r("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.userList,stripe:"",border:"",height:"100%"}},[r("el-table-column",{attrs:{prop:"realName",label:"用户名"}}),r("el-table-column",{attrs:{prop:"userPhone",label:"手机号码",width:"150"}}),3==e.userInfo.type?r("el-table-column",{attrs:{align:"center",label:"用户类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("getType")(t.row.type)))])]}}],null,!1,938808201)}):e._e(),2==e.userInfo.type?r("el-table-column",{attrs:{align:"center",label:"角色",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("role")(t.row.roleName)))])]}}],null,!1,2348151576)}):e._e(),r("el-table-column",{attrs:{align:"center",label:"性别",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("sexToString")(t.row.sex)))])]}}])}),3==e.userInfo.type?r("el-table-column",{attrs:{prop:"companyName",label:"所属公司",width:"350"}}):e._e(),r("el-table-column",{attrs:{label:"状态",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{value:t.row.isEnable},on:{change:function(r){return e.switchUser(r,t.$index,t.row.userId,t.row.type)}}})]}}])}),r("el-table-column",{attrs:{sortable:"",prop:"createTime",label:"创建日期",width:"200"}}),r("el-table-column",{attrs:{label:"操作",width:"260",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e.userInfo.type-1==t.row.type?[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.handleEdit(t.row.userId)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(r){return e.reset(t.row.userId)}}},[e._v("重置密码")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.row.userId)}}},[e._v("删除")])]:void 0}}],null,!0)})],1)],1),r("el-dialog",{attrs:{title:"新增/编辑用户",visible:e.show_dialog,width:"650px"},on:{"update:visible":function(t){e.show_dialog=t}}},[r("el-form",{attrs:{model:e.user_form}},[r("el-form-item",{attrs:{label:"用户名","label-width":"120px",required:"",clearable:""}},[r("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入用户名",maxlength:"10"},model:{value:e.user_form.realName,callback:function(t){e.$set(e.user_form,"realName","string"===typeof t?t.trim():t)},expression:"user_form.realName"}})],1),r("el-form-item",{attrs:{label:"手机号码","label-width":"120px",required:"",clearable:""}},[r("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入用户手机号码",maxlength:"11"},model:{value:e.user_form.userPhone,callback:function(t){e.$set(e.user_form,"userPhone","string"===typeof t?t.trim():t)},expression:"user_form.userPhone"}})],1),3==e.userInfo.type?r("el-form-item",{attrs:{label:"所属公司","label-width":"120px",required:""}},[r("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"请选择公司"},model:{value:e.companyId,callback:function(t){e.companyId=t},expression:"companyId"}},e._l(e.companyList,(function(e){return r("el-option",{key:e.companyId,attrs:{label:e.companyName,value:e.companyId}})})),1)],1):e._e(),2==e.userInfo.type?r("el-form-item",{attrs:{label:"角色","label-width":"120px",required:""}},[r("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"请选择用户角色",multiple:"",filterable:""},model:{value:e.roles,callback:function(t){e.roles=t},expression:"roles"}},e._l(e.roleList,(function(e){return r("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1):e._e(),r("el-form-item",{attrs:{label:"性别","label-width":"120px",required:""}},[r("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择性别"},model:{value:e.user_form.sex,callback:function(t){e.$set(e.user_form,"sex",t)},expression:"user_form.sex"}},e._l(e.sex_list,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.show_dialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.add_user}},[e._v("确 定")])],1)],1),e.total>15?r("div",{staticClass:"page_box"},[r("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":15,"current-page":e.current,total:e.total},on:{"current-change":e.getList,"update:currentPage":function(t){e.current=t},"update:current-page":function(t){e.current=t}}})],1):e._e()],1)},a=[],s=(r("ac1f"),r("5319"),r("a15b"),r("1276"),r("c24f")),l=r("fcac"),o={data:function(){return{status_list:[{name:"启用",value:!0},{name:"禁用",value:!1}],sex_list:[{name:"男",value:1},{name:"女",value:2}],type_list:[{name:"普通用户",value:1},{name:"公司管理员",value:2},{name:"超级管理员",value:3}],user_name:"",user_phone:"",company_name:"",user_type:"",isEnable:"",creat_time:"",userList:[],companyList:[],companyId:"",roleList:[],roles:[],roleId:"",total:0,current:1,show_dialog:!1,user_form:{realName:"",userPhone:"",sex:""}}},filters:{sexToString:function(e){return 2==e?"女":"男"},getType:function(e){return 3==e?"超级管理员":2==e?"公司管理员":1==e?"普通用户":void 0},role:function(e){return e?e.replace(/,/g,"、"):"暂无"}},computed:{userInfo:function(){return this.$store.state.user.userInfo}},mounted:function(){var e=this;this.getList(),3==this.userInfo.type?Object(l["a"])({pageNo:1,pageSize:300,isEnable:!0}).then((function(t){e.companyList=t.records})):Object(s["n"])().then((function(t){e.roleList=t}))},methods:{getList:function(e){var t=this,r={page:e||this.current,pageSize:15,userPhone:this.user_phone,realName:this.user_name,isEnable:this.isEnable};this.creat_time&&this.creat_time.length&&(r.startDate=this.creat_time[0],r.endDate=this.creat_time[1]),3==this.userInfo.type?(r.company=this.company_name,r.type=this.user_type):2==this.userInfo.type&&(r.roleId=this.roleId),Object(s["i"])(r).then((function(e){t.userList=e.records,t.total=e.total,t.current=e.current}))},restParams:function(){this.user_name="",this.isEnable="",this.creat_time="",this.user_phone="",this.roleId="",this.company_name="",this.user_type=""},open_add_user:function(){this.user_form={realName:"",userPhone:"",sex:""},this.companyId="",this.roles=[],this.show_dialog=!0},add_user:function(){var e=this,t=this.user_form;t.realName?/1[0-9]{10}/.test(t.userPhone)?t.sex?3!=this.userInfo.type||this.companyId?(3==this.userInfo.type&&(t.companyId=this.companyId),2!=this.userInfo.type||this.roles.length?(2==this.userInfo.type&&(t.roleId=this.roles.join()),t.userId?(t.mold=2,Object(s["b"])(t).then((function(t){e.$message.success("保存成功"),e.getList(),e.show_dialog=!1}))):(t.mold=1,Object(s["b"])(t).then((function(t){e.$message.success("添加成功"),e.getList(),e.show_dialog=!1})))):this.$message.error("请选择用户角色")):this.$message.error("请选择用户所属公司"):this.$message.error("请选择用户性别"):this.$message.error("请输入正确的手机号码"):this.$message.error("请输入用户名")},handleEdit:function(e){var t=this;Object(s["h"])({userId:e}).then((function(r){t.user_form={realName:r.realName,userPhone:r.userPhone,sex:r.sex,userId:e},t.companyId=r.companyId,r.roleIds&&(t.roles=r.roleIds.split(",")),t.show_dialog=!0}))},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["d"])({userId:e}).then((function(e){t.$message.success("删除成功"),t.getList()}))}))},reset:function(e){var t=this;Object(s["l"])({uid:e}).then((function(e){t.$message.success("操作成功")}))},switchUser:function(e,t,r,n){var a=this;r!=this.userInfo.userId?n!=this.userInfo.type?Object(s["e"])({userId:r}).then((function(r){a.$message.success("操作成功"),a.userList[t].isEnable=e})):this.$message.warning("不能改变该用户状态"):this.$message.warning("不能对自己进行操作")}}},i=o,u=(r("3789"),r("2877")),c=Object(u["a"])(i,n,a,!1,null,"5b1c028c",null);t["default"]=c.exports},fcac:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"d",(function(){return l})),r.d(t,"f",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"e",(function(){return u}));var n=r("a880");function a(e){return n["a"].get("/company/list",e)}function s(e){return n["a"].post("/company/add",e)}function l(e){return n["a"].post("/company/update",e)}function o(e){return n["a"].get("/company/getCompany",e)}function i(e){return n["a"].put1("/company/delete",e)}function u(e){return n["a"].put1("/company/enable",e)}}}]);