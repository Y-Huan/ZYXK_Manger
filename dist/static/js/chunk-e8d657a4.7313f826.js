(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e8d657a4"],{"8e3c":function(e,t,r){},c974:function(e,t,r){"use strict";r("8e3c")},e7de:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return o}));var a=r("a880");function n(e){return a["a"].post("/payment/list",e)}function i(e){return a["a"].post("/payment/detail",e)}function o(e){return a["a"].post("/payment/addPayment",e)}},f76f:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"search_box"},[r("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"供应商名称/手机号"},model:{value:e.supplier_name,callback:function(t){e.supplier_name="string"===typeof t?t.trim():t},expression:"supplier_name"}}),r("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"daterange","range-separator":"至","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:e.creat_time,callback:function(t){e.creat_time=t},expression:"creat_time"}}),r("el-button-group",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getList(1)}}},[e._v("搜索")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-right"},on:{click:e.restParams}},[e._v("重置")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.excel_out_payment}},[e._v("导出应付表")])],1)],1),r("div",{staticClass:"table_box"},[r("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.orderList,stripe:"",border:"",height:"100%"}},[r("el-table-column",{attrs:{label:"操作",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.paymentInfo(t.$index,t.row.supplierId,t.row.supplierName)}}},[e._v("详情")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.open_add_payment(t.$index,t.row.supplierId,t.row.supplierName)}}},[e._v("添加付款记录")])]}}])}),r("el-table-column",{attrs:{prop:"supplierName",label:"供应商名称"}}),r("el-table-column",{attrs:{prop:"openingBalance",label:"期初余额",align:"center",width:"200"}}),r("el-table-column",{attrs:{prop:"meet",label:"期间产生额",align:"center",width:"200"}}),r("el-table-column",{attrs:{prop:"paid",label:"期间付款额",align:"center",width:"200"}}),r("el-table-column",{attrs:{prop:"closingBalance",label:"期末余额",align:"center",width:"200"}})],1)],1),r("el-dialog",{attrs:{title:"添加付款记录",visible:e.show_dialog,width:"550px"},on:{"update:visible":function(t){e.show_dialog=t}}},[r("el-form",{attrs:{model:e.order_form}},[r("el-form-item",{attrs:{label:"收款方","label-width":"120px",required:""}},[r("el-input",{staticStyle:{width:"300px"},attrs:{disabled:"",maxlength:"30"},model:{value:e.order_form.name,callback:function(t){e.$set(e.order_form,"name","string"===typeof t?t.trim():t)},expression:"order_form.name"}})],1),r("el-form-item",{attrs:{label:"付款金额","label-width":"120px",required:""}},[r("el-input",{staticStyle:{width:"300px"},attrs:{clearable:"",placeholder:"请输入付款金额",maxlength:"30"},model:{value:e.order_form.money,callback:function(t){e.$set(e.order_form,"money","string"===typeof t?t.trim():t)},expression:"order_form.money"}})],1),r("el-form-item",{attrs:{label:"付款时间","label-width":"120px",required:""}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.order_form.date,callback:function(t){e.$set(e.order_form,"date",t)},expression:"order_form.date"}})],1),r("el-form-item",{attrs:{label:"备注","label-width":"120px"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{clearable:"",placeholder:"请输入备注",maxlength:"50"},model:{value:e.order_form.comment,callback:function(t){e.$set(e.order_form,"comment","string"===typeof t?t.trim():t)},expression:"order_form.comment"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.show_dialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.add_payment}},[e._v("确 定")])],1)],1),e.total>30?r("div",{staticClass:"page_box"},[r("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":30,"current-page":e.current,total:e.total},on:{"current-change":e.getList,"update:currentPage":function(t){e.current=t},"update:current-page":function(t){e.current=t}}})],1):e._e()],1)},n=[],i=r("e7de"),o=r("ed08"),l={data:function(){return{supplier_name:"",creat_time:[Object(o["b"])(new Date((new Date).getTime()-2592e6),"{y}-{m}-{d} ")+"00:00:00",Object(o["b"])(new Date,"{y}-{m}-{d} ")+"23:59:59"],orderList:[],total:0,current:1,show_dialog:!1,order_form:{supplier_id:"",name:"",money:"",date:"",comment:""}}},mounted:function(){this.getList()},methods:{getList:function(e){var t=this,r={supplierName:this.supplier_name};this.creat_time&&this.creat_time.length&&(r.createTime=this.creat_time[0],r.endTime=this.creat_time[1]),console.log(r),Object(i["c"])(r).then((function(e){t.orderList=e}))},restParams:function(){this.supplier_name="",this.creat_time=[Object(o["b"])(new Date((new Date).getTime()-2592e6),"{y}-{m}-{d} {h}:{i}:{s}"),Object(o["b"])(new Date,"{y}-{m}-{d} {h}:{i}:{s}")]},open_add_payment:function(e,t,r){this.order_form={supplier_id:t,name:r,money:"",date:"",comment:""},this.show_dialog=!0},paymentInfo:function(e,t,r){console.log(e),this.$router.push("/financial/detail/"+t+"/"+r)},excel_out_payment:function(){var e={supplierName:""};this.customer_name&&(e.supplierName=this.customer_name),this.creat_time&&this.creat_time.length&&(e.createTime=this.creat_time[0],e.endTime=this.creat_time[1]),window.open("//192.168.1.155:28081/payment/excelOutPayment?supplierName="+e.supplierName+"&createTime="+e.createTime+"&endTime="+e.endTime+"&token="+this.$store.state.user.token)},add_payment:function(){var e=this,t={supplierId:this.order_form.supplier_id,paymentAmount:this.order_form.money,paymentTime:this.order_form.date,remark:this.order_form.comment};t.paymentTime?t.paymentAmount?(console.log(t),Object(i["a"])(t).then((function(t){e.$message.success("添加成功"),e.order_form={supplier_id:"",name:"",money:"",date:"",comment:""},e.show_dialog=!1,e.getList()}))):this.$message.error("请输入付款金额"):this.$message.error("请选择付款时间")}}},s=l,c=(r("c974"),r("2877")),m=Object(c["a"])(s,a,n,!1,null,"75104a7d",null);t["default"]=m.exports}}]);