(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21afd162"],{"34b7":function(e,t,n){"use strict";n("7805")},7805:function(e,t,n){},ca72:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var r=n("a880");function i(e){return r["a"].post("/operation//in/updateInOperationOrderDetail",e)}function a(e){return r["a"].post("/operation/in/getOperOrderList",e)}function o(){return r["a"].get("/warehouse/list")}function c(e){return r["a"].get("/operation/in/getOperationOrderByOperationOrderId",e)}function s(e){return r["a"].post("/operation/in/getOperOrderDetaliList",e)}},fd90:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"search_box"},[n("el-input",{staticStyle:{width:"150px",height:"50px"},attrs:{clearable:"",placeholder:"单号"},model:{value:e.order_id,callback:function(t){e.order_id="string"===typeof t?t.trim():t},expression:"order_id"}}),n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"仓库"},model:{value:e.whse_id,callback:function(t){e.whse_id=t},expression:"whse_id"}},e._l(e.whse_list,(function(e){return n("el-option",{key:e.whseId,attrs:{label:e.whseName,value:e.whseId}})})),1),n("el-input",{staticStyle:{width:"150px",height:"50px"},attrs:{clearable:"",placeholder:"经办人"},model:{value:e.creator,callback:function(t){e.creator="string"===typeof t?t.trim():t},expression:"creator"}}),n("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"daterange","range-separator":"至","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.creat_time,callback:function(t){e.creat_time=t},expression:"creat_time"}})],1),n("div",{staticClass:"search_box"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getList(1)}}},[e._v("搜索")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-right"},on:{click:e.restParams}},[e._v("重置")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.out_order_listExcel}},[e._v("Excel导出入库单列表")])],1),n("div",{staticClass:"table_box"},[n("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.inorderList,stripe:"",border:"",height:"100%"}},[n("el-table-column",{attrs:{label:"操作",width:"148",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.orderInfo(n,t.$index,t.row.operOrderId)}}},[e._v("详情")]),n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.revoke(n,t.$index,t.row.operOrderId)}}},[e._v("撤销")])]}}])}),n("el-table-column",{attrs:{align:"center",prop:"operOrderId",label:"入库单号",width:"190"}}),n("el-table-column",{attrs:{align:"center",label:"入库类型",width:"190"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("sexToString")(t.row.type)))])]}}])}),n("el-table-column",{attrs:{align:"center",prop:"supplier",label:"来源",width:"190"}}),n("el-table-column",{attrs:{align:"center",prop:"whseName",label:"入库仓库",width:"190"}}),n("el-table-column",{attrs:{align:"center",label:"入库件数总计",width:"190"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.piecegoods||0))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"入库重量总计",width:"190"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.weight||0))])]}}])}),n("el-table-column",{attrs:{align:"center",prop:"totalPrice",label:"入库金额总计",width:"190"}}),n("el-table-column",{attrs:{align:"center",prop:"creator",label:"经办人",width:"190"}}),n("el-table-column",{attrs:{align:"center",sortable:"",prop:"handleTime",label:"入库时间",width:"190"}}),n("el-table-column",{attrs:{align:"center",sortable:"",prop:"createTime",label:"操作日期",width:"190"}})],1)],1)])},i=[],a=(n("a434"),n("ca72")),o=n("ed08"),c={data:function(){return{creat_time:[Object(o["b"])(new Date((new Date).getTime()-2592e6),"{y}-{m}-{d} ")+"00:00:00",Object(o["b"])(new Date,"{y}-{m}-{d} ")+"23:59:59"],type_list:[{name:"采购入库",value:1},{name:"出库",value:2}],whse_list:[],order_id:"",whse_id:"",creator:"",inorderList:[],total:0,current:1,editIndex:"",show_dialog:!1,company_form:{companyName:"",companyAddress:""}}},mounted:function(){this.getList(),console.log(this.creat_time)},filters:{sexToString:function(e){return 2==e?"出库":1==e?"采购入库":void 0}},methods:{getList:function(e){var t=this,n={pageNo:e||this.current,pageSize:30,operOrderId:this.order_id,orderType:1,whseId:this.whse_id,selectStringKey:this.creator};this.creat_time&&this.creat_time.length&&(n.createTime=this.creat_time[0],n.endTime=this.creat_time[1]),console.log(n),Object(a["c"])(n).then((function(e){t.inorderList=e.operationOrderViews,t.total=e.total,t.current=e.current})),Object(a["e"])().then((function(e){t.whse_list=e,t.total=e.total,t.current=e.current}))},revoke:function(e,t,n){var r=this,i={operOrderId:n,orderType:1};this.$confirm("此操作将永久撤销该入库单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["d"])(i).then((function(e){console.log(e),r.$message({type:"success",message:"删除成功!"}),r.inorderList.splice(t,1)}))})).catch((function(){r.$message({type:"info",message:"已取消删除"})}))},orderInfo:function(e,t,n){this.$router.push("/inorder/detail/"+n)},restParams:function(){this.order_id="",this.whse_id="",this.creator="",this.creat_time=[Object(o["b"])(new Date((new Date).getTime()-6048e5),"{y}-{m}-{d} {h}:{i}:{s}"),Object(o["b"])(new Date,"{y}-{m}-{d} {h}:{i}:{s}")]},out_order_listExcel:function(){var e={operOrderId:this.order_id,orderType:1,whseId:this.whse_id,selectStringKey:this.creator,createTime:"",endTime:""};this.creat_time&&this.creat_time.length&&(e.createTime=this.creat_time[0],e.endTime=this.creat_time[1]),window.open("//192.168.1.155:28081/operation/out/operExcel?orderType=1&operOrderId="+e.operOrderId+"&whseId="+e.whseId+"&createTime="+e.createTime+"&endTime="+e.endTime+"&creator="+e.selectStringKey+"&token="+this.$store.state.user.token)},add_company:function(){var e=this;this.company_form.companyName?this.company_form.companyId?editCompany(this.company_form).then((function(t){e.$message.success("保存成功"),e.companyList[e.editIndex].companyName=e.company_form.companyName,e.companyList[e.editIndex].companyAddress=e.company_form.companyAddress,e.show_dialog=!1,e.$forceUpdate()})):creatCompany(this.company_form).then((function(t){e.$message.success("添加成功"),e.getList(),e.show_dialog=!1})):this.$message.error("请输入公司名称")},handleEdit:function(e,t){var n=this;this.editIndex=e,getCompany({companyId:t}).then((function(e){n.company_form={companyName:e.companyName,companyAddress:e.companyAddress,companyId:t},n.show_dialog=!0}))},handleDelete:function(e,t){var n=this;this.$confirm("此操作将永久删除该公司, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){delCompany({companyId:t}).then((function(t){n.$message.success("删除成功"),n.companyList.splice(e,1)}))}))},switchCompany:function(e,t,n){var r=this;enableCompany({companyId:n}).then((function(n){r.$message.success("操作成功"),r.companyList[t].isEnable=e}))}}},s=c,l=(n("34b7"),n("2877")),d=Object(l["a"])(s,r,i,!1,null,"1c421b2c",null);t["default"]=d.exports}}]);