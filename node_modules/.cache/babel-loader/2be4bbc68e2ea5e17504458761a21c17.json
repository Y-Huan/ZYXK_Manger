{"remainingRequest":"C:\\Users\\Kevin Y\\Desktop\\毕业设计相关\\ZYXK_Manager\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Kevin Y\\Desktop\\毕业设计相关\\ZYXK_Manager\\src\\utils\\request.js","dependencies":[{"path":"C:\\Users\\Kevin Y\\Desktop\\毕业设计相关\\ZYXK_Manager\\src\\utils\\request.js","mtime":1646214983914},{"path":"C:\\Users\\Kevin Y\\Desktop\\毕业设计相关\\ZYXK_Manager\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Kevin Y\\Desktop\\毕业设计相关\\ZYXK_Manager\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKaW1wb3J0IHsgTWVzc2FnZUJveCwgTWVzc2FnZSwgTG9hZGluZyB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCBxcyBmcm9tICdxcyc7CmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKdmFyICRhbGVydCA9IE1lc3NhZ2VCb3guYWxlcnQ7CnZhciBsb2FkaW5nID0gbnVsbDsKd2luZG93Ll9heGlvc1Byb21pc2VBcnIgPSBbXTsKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEksCiAgdGltZW91dDogNTAwMDAKfSk7CnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBpZiAoY29uZmlnLmRhdGFUeXBlID09ICdGb3JtRGF0YScpIHsKICAgIGNvbmZpZy5kYXRhID0gcXMuc3RyaW5naWZ5KGNvbmZpZy5kYXRhKTsKICAgIGNvbmZpZy5oZWFkZXJzID0gewogICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCcgLy/phY3nva7or7fmsYLlpLQKCiAgICB9OwogIH0gZWxzZSB7CiAgICBjb25maWcuZGF0YSA9IEpTT04uc3RyaW5naWZ5KGNvbmZpZy5kYXRhKTsKICAgIGNvbmZpZy5oZWFkZXJzID0gewogICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIC8v6YWN572u6K+35rGC5aS0CgogICAgfTsKICB9CgogIGlmIChzdG9yZS5nZXR0ZXJzLnRva2VuKSB7CiAgICBjb25maWcuaGVhZGVyc1sndG9rZW4nXSA9IGdldFRva2VuKCk7CiAgfQoKICBsb2FkaW5nID0gTG9hZGluZy5zZXJ2aWNlKHsKICAgIGxvY2s6IHRydWUsCiAgICB0ZXh0OiAn6K+356iN5ZCOJywKICAgIHNwaW5uZXI6ICdlbC1pY29uLWxvYWRpbmcnLAogICAgYmFja2dyb3VuZDogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC43KScKICB9KTsgLy8g5bCG6K+35rGC55qE5o6l5Y+j5re75Yqg5Yiw5pWw57uE5LitCgogIGNvbmZpZy5jYW5jZWxUb2tlbiA9IG5ldyBheGlvcy5DYW5jZWxUb2tlbihmdW5jdGlvbiAoY2FuY2VsKSB7CiAgICB3aW5kb3cuX2F4aW9zUHJvbWlzZUFyci5wdXNoKHsKICAgICAgY2FuY2VsOiBjYW5jZWwsCiAgICAgIGlkOiBjb25maWcuaWQKICAgIH0pOwogIH0pOwogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgbG9hZGluZy5jbG9zZSgpOwoKICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlICE9IDIwMCkgewogICAgJGFsZXJ0KHJlc3BvbnNlLmRhdGEuY29kZSArICfvvJonICsgcmVzcG9uc2UuZGF0YS5tZXNzYWdlLCAn5o+Q56S6Jyk7IC8vdG9rZW7lpLHmlYgKCiAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09IDk5OTIwKSB7CiAgICAgIHN0b3JlLmNvbW1pdCgndXNlci9TRVRfSU5JVF9JTkZPJyk7CgogICAgICB0cnkgewogICAgICAgIHdpbmRvdy5fYXhpb3NQcm9taXNlQXJyLmZvckVhY2goZnVuY3Rpb24gKGVsZSwgaW5kZXgpIHsKICAgICAgICAgIGVsZS5jYW5jZWwoKTsgLy8g6Lev55Sx6Lez6L2s5LmL5YmN77yM5riF56m677yI57uI5q2i77yJ5LiK5LiA5Liq6aG16Z2i5q2j5Zyo6K+35rGC55qE5YaF5a65CgogICAgICAgICAgZGVsZXRlIHdpbmRvdy5fYXhpb3NQcm9taXNlQXJyW2luZGV4XTsKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9CgogICAgICByb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICB9CgogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlLmRhdGEpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5kYXRhOwogIH0KfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgbG9hZGluZy5jbG9zZSgpOwoKICBpZiAoZXJyb3IgIT0gJ0NhbmNlbCcpIHsKICAgICRhbGVydChlcnJvciwgJ+aPkOekuicpOwogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IHNlcnZpY2U7"},{"version":3,"sources":["C:/Users/Kevin Y/Desktop/毕业设计相关/ZYXK_Manager/src/utils/request.js"],"names":["axios","router","MessageBox","Message","Loading","store","qs","getToken","$alert","alert","loading","window","_axiosPromiseArr","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","dataType","data","stringify","headers","JSON","getters","token","lock","text","spinner","background","cancelToken","CancelToken","cancel","push","id","error","Promise","reject","response","close","code","message","commit","forEach","ele","index","e","console","log"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport router from '@/router'\nimport {\n  MessageBox,\n  Message,\n  Loading\n} from 'element-ui'\nimport store from '@/store'\nimport qs from 'qs'\nimport {\n  getToken\n} from '@/utils/auth'\nlet $alert = MessageBox.alert;\nvar loading = null;\nwindow._axiosPromiseArr = [];\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API,\n  timeout: 50000\n})\nservice.interceptors.request.use(\n  config => {\n    if (config.dataType == 'FormData') {\n      config.data = qs.stringify(config.data);\n      config.headers = {\n        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8' //配置请求头\n      }\n    } else {\n      config.data = JSON.stringify(config.data);\n      config.headers = {\n        'Content-Type': 'application/json' //配置请求头\n      }\n    }\n    if (store.getters.token) {\n      config.headers['token'] = getToken()\n    }\n    loading = Loading.service({\n      lock: true,\n      text: '请稍后',\n      spinner: 'el-icon-loading',\n      background: 'rgba(255, 255, 255, 0.7)'\n    })\n    // 将请求的接口添加到数组中\n    config.cancelToken = new axios.CancelToken(cancel => {\n      window._axiosPromiseArr.push({\n        cancel,\n        id: config.id\n      });\n    });\n    return config\n  },\n  error => {\n    return Promise.reject(error)\n  }\n)\nservice.interceptors.response.use(response => {\n    loading.close();\n    if (response.data.code != 200) {\n      $alert(response.data.code + '：' + response.data.message, '提示');\n      //token失效\n      if (response.data.code == 99920) {\n        store.commit('user/SET_INIT_INFO');\n        try {\n          window._axiosPromiseArr.forEach((ele, index) => {\n            ele.cancel(); // 路由跳转之前，清空（终止）上一个页面正在请求的内容\n            delete window._axiosPromiseArr[index];\n          });\n        } catch (e) {\n          console.log(e)\n        }\n        router.push(`/login`)\n      }\n      return Promise.reject(response.data);\n    } else {\n      return response.data.data\n    }\n  },\n  error => {\n    loading.close();\n    if(error != 'Cancel'){\n      $alert(error, '提示')\n    }\n    return Promise.reject(error)\n  }\n)\nexport default service\n"]}]}