{"remainingRequest":"C:\\Users\\Kevin Y\\Desktop\\毕业设计相关\\ZYXK_Manager\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Kevin Y\\Desktop\\毕业设计相关\\ZYXK_Manager\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\Kevin Y\\Desktop\\毕业设计相关\\ZYXK_Manager\\src\\store\\modules\\user.js","mtime":1646216698865},{"path":"C:\\Users\\Kevin Y\\Desktop\\毕业设计相关\\ZYXK_Manager\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Kevin Y\\Desktop\\毕业设计相关\\ZYXK_Manager\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgbG9nb3V0IGFzIF9sb2dvdXQgfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiwgZ2V0SW5mbywgc2V0SW5mbywgcmVtb3ZlSW5mbyB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCByb3V0ZXIsIHsgcmVzZXRSb3V0ZXIgfSBmcm9tICdAL3JvdXRlcic7CnZhciBzdGF0ZSA9IHsKICB0b2tlbjogZ2V0VG9rZW4oKSwKICB1c2VySW5mbzogZ2V0SW5mbygpID8gSlNPTi5wYXJzZShnZXRJbmZvKCkpIDogJycKfTsKdmFyIG11dGF0aW9ucyA9IHsKICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgfSwKICBTRVRfSU5GTzogZnVuY3Rpb24gU0VUX0lORk8oc3RhdGUsIGluZm8pIHsKICAgIHN0YXRlLnVzZXJJbmZvID0gaW5mbzsKICB9LAogIFNFVF9JTklUX0lORk86IGZ1bmN0aW9uIFNFVF9JTklUX0lORk8oc2F0ZSkgewogICAgc3RhdGUudG9rZW4gPSAnJzsKICAgIHN0YXRlLnVzZXJJbmZvID0gJyc7CiAgICByZW1vdmVUb2tlbigpOwogICAgcmVtb3ZlSW5mbygpOwogICAgcmVzZXRSb3V0ZXIoKTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZi5zdGF0ZSwKICAgICAgICBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2g7CiAgICB2YXIgdXNlcm5hbWUgPSB1c2VySW5mby51c2VybmFtZSwKICAgICAgICBwYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkLAogICAgICAgIHR5cGUgPSB1c2VySW5mby50eXBlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2xvZ2luKHsKICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLAogICAgICAgIHR5cGU6IHR5cGUKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCByZXNwb25zZS50b2tlbik7CiAgICAgICAgc2V0VG9rZW4ocmVzcG9uc2UudG9rZW4pOwogICAgICAgIGNvbW1pdCgnU0VUX0lORk8nLCByZXNwb25zZSk7CiAgICAgICAgc2V0SW5mbyhyZXNwb25zZSk7CiAgICAgICAgcmVzZXRSb3V0ZXIoKTsKICAgICAgICBkaXNwYXRjaCgncGVybWlzc2lvbi9nZW5lcmF0ZVJvdXRlcycsIFtyZXNwb25zZS5hdXRob3JpdHlQZXJtaXNzaW9uXSwgewogICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgcm91dGVyLmFkZFJvdXRlcyhyZXMpOwogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgcmVqZWN0KGVycik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlLAogICAgICAgIGRpc3BhdGNoID0gX3JlZjIuZGlzcGF0Y2g7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfbG9nb3V0KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCAnJyk7CiAgICAgICAgY29tbWl0KCdTRVRfSU5GTycsICcnKTsKICAgICAgICByZW1vdmVUb2tlbigpOwogICAgICAgIHJlbW92ZUluZm8oKTsKICAgICAgICByZXNldFJvdXRlcigpOwogICAgICAgIGRpc3BhdGNoKCd0YWdzVmlldy9kZWxBbGxWaWV3cycsIG51bGwsIHsKICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICB9KTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOwogICAgICAgIGNvbW1pdCgnU0VUX0lORk8nLCAnJyk7CiAgICAgICAgcmVtb3ZlVG9rZW4oKTsKICAgICAgICByZW1vdmVJbmZvKCk7CiAgICAgICAgcmVzZXRSb3V0ZXIoKTsKICAgICAgICBkaXNwYXRjaCgndGFnc1ZpZXcvZGVsQWxsVmlld3MnLCBudWxsLCB7CiAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCAnJyk7CiAgICAgIGNvbW1pdCgnU0VUX0lORk8nLCAnJyk7CiAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgIHJlbW92ZUluZm8oKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"sources":["C:/Users/Kevin Y/Desktop/毕业设计相关/ZYXK_Manager/src/store/modules/user.js"],"names":["login","logout","getToken","setToken","removeToken","getInfo","setInfo","removeInfo","router","resetRouter","state","token","userInfo","JSON","parse","mutations","SET_TOKEN","SET_INFO","info","SET_INIT_INFO","sate","actions","commit","dispatch","username","password","type","Promise","resolve","reject","then","response","console","log","authorityPermission","root","res","addRoutes","catch","err","error","resetToken","namespaced"],"mappings":"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","sourcesContent":["import { login, logout } from '@/api/user'\nimport { getToken, setToken, removeToken,getInfo, setInfo, removeInfo } from '@/utils/auth'\nimport router, { resetRouter } from '@/router'\n\nconst state = {\n  token: getToken(),\n  userInfo:getInfo()?JSON.parse(getInfo()):''\n}\n\nconst mutations = {\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_INFO: (state, info) => {\n    state.userInfo = info;\n  },\n  SET_INIT_INFO:(sate)=>{\n    state.token = ''\n    state.userInfo = '';\n    removeToken()\n    removeInfo()\n    resetRouter()\n  }\n}\n\nconst actions = {\n  login({ commit,state, dispatch}, userInfo) {\n    const { username, password , type } = userInfo;\n    return new Promise((resolve, reject) => {\n      login({ username: username, password: password , type: type }).then(response => {\n        console.log(response)\n        commit('SET_TOKEN', response.token);\n        setToken(response.token);\n        commit('SET_INFO', response);\n        setInfo(response);\n        resetRouter()\n        dispatch('permission/generateRoutes',[response.authorityPermission],{ root: true }).then(res=>{\n          router.addRoutes(res)\n          resolve()\n        }).catch(err=>{reject(err)})\n      }).catch(err=>{reject(err)})\n    })\n  },\n  logout({ commit, state, dispatch }) {\n    return new Promise((resolve, reject) => {\n      logout().then(() => {\n        commit('SET_TOKEN', '')\n        commit('SET_INFO', '')\n        removeToken()\n        removeInfo()\n        resetRouter()\n        dispatch('tagsView/delAllViews', null, { root: true })\n        resolve()\n      }).catch(error => {\n        commit('SET_TOKEN', '')\n        commit('SET_INFO', '')\n        removeToken()\n        removeInfo()\n        resetRouter()\n        dispatch('tagsView/delAllViews', null, { root: true })\n        reject(error)\n      })\n    })\n  },\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      commit('SET_TOKEN', '')\n      commit('SET_INFO', '')\n      removeToken()\n      removeInfo()\n      resolve()\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"]}]}