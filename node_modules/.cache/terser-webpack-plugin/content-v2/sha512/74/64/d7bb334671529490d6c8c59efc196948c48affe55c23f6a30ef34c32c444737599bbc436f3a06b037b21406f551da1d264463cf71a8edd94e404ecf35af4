{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-3da42327\"],{\"15e9\":function(e,t,i){},aedf:function(e,t,i){\"use strict\";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"app-container\"},[i(\"div\",{staticClass:\"search_box\"},[i(\"el-input\",{staticStyle:{width:\"200px\"},attrs:{clearable:\"\",placeholder:\"供应商名称\"},model:{value:e.customer_name,callback:function(t){e.customer_name=\"string\"===typeof t?t.trim():t},expression:\"customer_name\"}}),i(\"el-input\",{staticStyle:{width:\"200px\"},attrs:{clearable:\"\",placeholder:\"手机号码\"},model:{value:e.customer_phone,callback:function(t){e.customer_phone=\"string\"===typeof t?t.trim():t},expression:\"customer_phone\"}}),i(\"el-cascader\",{attrs:{placeholder:\"请选择省市区\",options:e.region,props:e.props},on:{change:e.changeCity},model:{value:e.city,callback:function(t){e.city=t},expression:\"city\"}}),i(\"el-button-group\",[i(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:function(t){return e.getList(1)}}},[e._v(\"搜索\")]),i(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-refresh-right\"},on:{click:e.restParams}},[e._v(\"重置\")]),i(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-circle-plus-outline\"},on:{click:e.open_add_customer}},[e._v(\"新增\")]),i(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-download\"},on:{click:e.out_supplier_excel}},[e._v(\"导出供应商\")])],1)],1),i(\"div\",{staticClass:\"table_box\"},[i(\"el-table\",{staticClass:\"table\",staticStyle:{width:\"100%\"},attrs:{data:e.customerList,stripe:\"\",border:\"\",height:\"100%\"}},[i(\"el-table-column\",{attrs:{label:\"操作\",width:\"160\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[i(\"el-button\",{attrs:{size:\"mini\",type:\"primary\"},on:{click:function(i){return e.handleEdit(t.$index,t.row.supplierId,t.row.isEnable)}}},[e._v(\"编辑\")]),i(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(i){return e.handleDelete(t.$index,t.row.supplierId)}}},[e._v(\"删除\")])]}}])}),i(\"el-table-column\",{attrs:{label:\"状态\",width:\"80\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[i(\"el-switch\",{attrs:{value:t.row.isEnable},on:{change:function(i){return e.switchCompany(i,t.$index,t.row.supplierId)}}})]}}])}),i(\"el-table-column\",{attrs:{prop:\"supplierName\",label:\"供应商名称\"}}),i(\"el-table-column\",{attrs:{prop:\"supplierContact\",label:\"联系人\",width:\"150\",align:\"center\"}}),i(\"el-table-column\",{attrs:{prop:\"supplierPhone\",label:\"手机号码\",width:\"150\",align:\"center\"}}),i(\"el-table-column\",{attrs:{prop:\"provinceName\",label:\"所属省份\",width:\"150\",align:\"center\"}}),i(\"el-table-column\",{attrs:{prop:\"cityName\",label:\"所属市\",width:\"150\",align:\"center\"}}),i(\"el-table-column\",{attrs:{prop:\"areaName\",label:\"所属区县\",width:\"150\",align:\"center\"}}),i(\"el-table-column\",{attrs:{prop:\"supplierAddress\",label:\"详细地址\",width:\"300\"}})],1)],1),i(\"el-dialog\",{attrs:{title:e.editIndex?\"编辑供应商\":\"新增供应商\",visible:e.show_dialog,width:\"650px\"},on:{\"update:visible\":function(t){e.show_dialog=t}}},[i(\"el-form\",{attrs:{model:e.customer_form}},[i(\"el-form-item\",{attrs:{label:\"状态\",\"label-width\":\"120px\",required:\"\"}},[i(\"el-select\",{staticStyle:{width:\"100px\"},attrs:{placeholder:\"状态\"},model:{value:e.customer_form.status,callback:function(t){e.$set(e.customer_form,\"status\",t)},expression:\"customer_form.status\"}},e._l(e.status_list,(function(e){return i(\"el-option\",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),i(\"el-form-item\",{attrs:{label:\"供应商名称\",\"label-width\":\"120px\",required:\"\"}},[i(\"el-input\",{staticStyle:{width:\"400px\"},attrs:{clearable:\"\",placeholder:\"请输入供应商名称\",maxlength:\"30\"},model:{value:e.customer_form.name,callback:function(t){e.$set(e.customer_form,\"name\",\"string\"===typeof t?t.trim():t)},expression:\"customer_form.name\"}})],1),i(\"el-form-item\",{attrs:{label:\"联系人\",\"label-width\":\"120px\",required:\"\"}},[i(\"el-input\",{staticStyle:{width:\"400px\"},attrs:{clearable:\"\",placeholder:\"请输入联系人\",maxlength:\"30\"},model:{value:e.customer_form.user,callback:function(t){e.$set(e.customer_form,\"user\",\"string\"===typeof t?t.trim():t)},expression:\"customer_form.user\"}})],1),i(\"el-form-item\",{attrs:{label:\"联系电话\",\"label-width\":\"120px\",required:\"\"}},[i(\"el-input\",{staticStyle:{width:\"400px\"},attrs:{clearable:\"\",placeholder:\"请输入联系电话\",maxlength:\"30\"},model:{value:e.customer_form.phone,callback:function(t){e.$set(e.customer_form,\"phone\",\"string\"===typeof t?t.trim():t)},expression:\"customer_form.phone\"}})],1),i(\"el-form-item\",{attrs:{label:\"所属地区\",\"label-width\":\"120px\",required:\"\"}},[i(\"el-cascader\",{attrs:{placeholder:\"请选择省市区\",options:e.region,props:e.props},on:{change:e.changeCity},model:{value:e.city,callback:function(t){e.city=t},expression:\"city\"}})],1),i(\"el-form-item\",{attrs:{label:\"详细地址\",\"label-width\":\"120px\",required:\"\"}},[i(\"el-input\",{staticStyle:{width:\"400px\"},attrs:{clearable:\"\",placeholder:\"请输入详细地址\",maxlength:\"50\"},model:{value:e.customer_form.address,callback:function(t){e.$set(e.customer_form,\"address\",\"string\"===typeof t?t.trim():t)},expression:\"customer_form.address\"}})],1)],1),i(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{on:{click:function(t){e.show_dialog=!1}}},[e._v(\"取 消\")]),i(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.add_customer}},[e._v(\"确 定\")])],1)],1)],1)},r=[],o=(i(\"b0c0\"),i(\"a434\"),i(\"a880\"));function n(e){return o[\"a\"].get(\"/supplier/getSupplier\",e)}function l(){return o[\"a\"].get(\"/common/getRegion\")}function a(e){return o[\"a\"].post(\"/supplier/addSupplier\",e)}function c(e){return o[\"a\"].put1(\"/supplier/enableSupplier\",e)}function u(e){return o[\"a\"].get(\"/supplier/getSupplietById\",e)}function p(e){return o[\"a\"].put1(\"/supplier/delSupplier\",e)}var m={data:function(){return{status_list:[{name:\"启用\",value:!0},{name:\"禁用\",value:!1}],customer_name:\"\",customer_phone:\"\",isEnable:\"\",region:[],city:[],customerList:[],regionName:\"\",editIndex:\"\",show_dialog:!1,customer_form:{status:\"\",name:\"\",user:\"\",phone:\"\",city:\"\",address:\"\"},options:[],props:{value:\"code\",label:\"regionName\",children:\"sonRegionList\",checkStrictly:!0}}},mounted:function(){this.getList()},methods:{getList:function(e){var t=this,i={pageNo:e||this.current,pageSize:30,supplierName:this.customer_name,supplierPhone:this.customer_phone};1==this.city.length&&(i.province=this.city[0]),2==this.city.length&&(i.province=this.city[0],i.city=this.city[1]),3==this.city.length&&(i.province=this.city[0],i.city=this.city[1],i.area=this.city[2]),console.log(i),n(i).then((function(e){t.customerList=e.records})),l().then((function(e){t.region=e,console.log(t.region)}))},changeCity:function(){console.log(this.city)},restParams:function(){this.customer_name=\"\",this.customer_phone=\"\",this.isEnable=\"\",this.city=[]},open_add_customer:function(){this.editIndex=\"\",this.customer_form={status:\"\",name:\"\",user:\"\",phone:\"\",city:\"\",address:\"\"},this.show_dialog=!0},add_customer:function(){var e=this,t={supplierId:this.customer_form.supplierId,isEnable:this.customer_form.status,supplierName:this.customer_form.name,supplierPhone:this.customer_form.phone,supplierAddress:this.customer_form.address,supplierContact:this.customer_form.user};1==this.city.length&&(t.province=this.city[0]),2==this.city.length&&(t.province=this.city[0],t.city=this.city[1]),3==this.city.length&&(t.province=this.city[0],t.city=this.city[1],t.area=this.city[2]),console.log(t),this.customer_form.name?this.customer_form.phone?this.customer_form.address?this.customer_form.user?0!=this.city.length?a(t).then((function(t){e.$message.success(\"更新成功\"),e.city=[],console.log(e.city),e.$forceUpdate(),e.show_dialog=!1,e.getList()})):this.$message.error(\"请至少选择一个行政区\"):this.$message.error(\"请输入联系人\"):this.$message.error(\"请输入详细地址\"):this.$message.error(\"请输入手机号\"):this.$message.error(\"请输入供应商名称\")},handleEdit:function(e,t,i){var s=this;this.editIndex=t,u({supplierId:t}).then((function(e){s.customer_form={name:e.supplierName,phone:e.supplierPhone,status:e.isEnable,user:e.supplierContact,address:e.supplierAddress,supplierId:t},s.city=[],e.province&&s.city.push(e.province),e.city&&s.city.push(e.city),e.area&&s.city.push(e.area),console.log(s.city),s.show_dialog=!0}))},handleDelete:function(e,t){var i=this;console.log(t),this.$confirm(\"此操作将永久删除该供应商, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){p({companyId:t}).then((function(t){i.$message.success(\"删除成功\"),i.customerList.splice(e,1)}))}))},switchCompany:function(e,t,i){var s=this;console.log({companyId:i}),c({companyId:i}).then((function(i){s.$message.success(\"操作成功\"),s.customerList[t].isEnable=e}))},out_supplier_excel:function(){var e={supplierName:this.customer_name,supplierPhone:this.customer_phone,province:\"\",city:\"\",area:\"\"};1==this.city.length&&(e.province=this.city[0]),2==this.city.length&&(e.province=this.city[0],e.city=this.city[1]),3==this.city.length&&(e.province=this.city[0],e.city=this.city[1],e.area=this.city[2]),window.open(\"//cloudserver.hugehuge.net/supplier/excelOutSupplier?supplier=\"+e.supplierName+\"&supplierPhone=\"+e.supplierPhone+\"&province=\"+e.province+\"&city=\"+e.city+\"&area=\"+e.area+\"&token=\"+this.$store.state.user.token)}}},h=m,d=(i(\"b666\"),i(\"2877\")),f=Object(d[\"a\"])(h,s,r,!1,null,\"40141e2f\",null);t[\"default\"]=f.exports},b666:function(e,t,i){\"use strict\";i(\"15e9\")}}]);","extractedComments":[]}