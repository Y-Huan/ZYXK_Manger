{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-3d96b824\"],{aedf:function(t,e,o){\"use strict\";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"div\",{staticClass:\"app-container\"},[o(\"div\",{staticClass:\"search_box\"},[o(\"el-input\",{staticStyle:{width:\"200px\"},attrs:{clearable:\"\",placeholder:\"供应商名称\"},model:{value:t.customer_name,callback:function(e){t.customer_name=\"string\"===typeof e?e.trim():e},expression:\"customer_name\"}}),o(\"el-input\",{staticStyle:{width:\"200px\"},attrs:{clearable:\"\",placeholder:\"手机号码\"},model:{value:t.customer_phone,callback:function(e){t.customer_phone=\"string\"===typeof e?e.trim():e},expression:\"customer_phone\"}}),o(\"el-cascader\",{attrs:{placeholder:\"请选择省市区\",options:t.region,props:t.props},on:{change:t.changeCity},model:{value:t.city,callback:function(e){t.city=e},expression:\"city\"}}),o(\"el-button-group\",[o(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:function(e){return t.getList(1)}}},[t._v(\"搜索\")]),o(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-refresh-right\"},on:{click:t.restParams}},[t._v(\"重置\")]),o(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-circle-plus-outline\"},on:{click:t.open_add_customer}},[t._v(\"新增\")]),o(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-download\"},on:{click:t.out_supplier_excel}},[t._v(\"导出供应商\")])],1)],1),o(\"div\",{staticClass:\"table_box\"},[o(\"el-table\",{staticClass:\"table\",staticStyle:{width:\"100%\"},attrs:{data:t.customerList,stripe:\"\",border:\"\",height:\"100%\"}},[o(\"el-table-column\",{attrs:{label:\"操作\",width:\"160\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[o(\"el-button\",{attrs:{size:\"mini\",type:\"primary\"},on:{click:function(o){return t.handleEdit(e.$index,e.row.companyId,e.row.isEnable)}}},[t._v(\"编辑\")]),o(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(o){return t.handleDelete(e.$index,e.row.companyId)}}},[t._v(\"删除\")])]}}])}),o(\"el-table-column\",{attrs:{label:\"状态\",width:\"80\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[o(\"el-switch\",{attrs:{value:e.row.isEnable},on:{change:function(o){return t.switchCompany(o,e.$index,e.row.companyId)}}})]}}])}),o(\"el-table-column\",{attrs:{prop:\"companyName\",label:\"供应商名称\"}}),o(\"el-table-column\",{attrs:{prop:\"companyContact\",label:\"联系人\",width:\"150\",align:\"center\"}}),o(\"el-table-column\",{attrs:{prop:\"companyPhone\",label:\"手机号码\",width:\"150\",align:\"center\"}}),o(\"el-table-column\",{attrs:{prop:\"province\",label:\"所属省份\",width:\"150\",align:\"center\"}}),o(\"el-table-column\",{attrs:{prop:\"city\",label:\"所属市\",width:\"150\",align:\"center\"}}),o(\"el-table-column\",{attrs:{prop:\"area\",label:\"所属区县\",width:\"150\",align:\"center\"}}),o(\"el-table-column\",{attrs:{prop:\"companyAddress\",label:\"详细地址\",width:\"300\"}})],1)],1),o(\"el-dialog\",{attrs:{title:t.editIndex?\"编辑供应商\":\"新增供应商\",visible:t.show_dialog,width:\"650px\"},on:{\"update:visible\":function(e){t.show_dialog=e}}},[o(\"el-form\",{attrs:{model:t.customer_form}},[o(\"el-form-item\",{attrs:{label:\"状态\",\"label-width\":\"120px\",required:\"\"}},[o(\"el-select\",{staticStyle:{width:\"100px\"},attrs:{placeholder:\"状态\"},model:{value:t.customer_form.status,callback:function(e){t.$set(t.customer_form,\"status\",e)},expression:\"customer_form.status\"}},t._l(t.status_list,(function(t){return o(\"el-option\",{key:t.value,attrs:{label:t.name,value:t.value}})})),1)],1),o(\"el-form-item\",{attrs:{label:\"供应商名称\",\"label-width\":\"120px\",required:\"\"}},[o(\"el-input\",{staticStyle:{width:\"400px\"},attrs:{clearable:\"\",placeholder:\"请输入供应商名称\",maxlength:\"30\"},model:{value:t.customer_form.name,callback:function(e){t.$set(t.customer_form,\"name\",\"string\"===typeof e?e.trim():e)},expression:\"customer_form.name\"}})],1),o(\"el-form-item\",{attrs:{label:\"联系人\",\"label-width\":\"120px\",required:\"\"}},[o(\"el-input\",{staticStyle:{width:\"400px\"},attrs:{clearable:\"\",placeholder:\"请输入联系人\",maxlength:\"30\"},model:{value:t.customer_form.user,callback:function(e){t.$set(t.customer_form,\"user\",\"string\"===typeof e?e.trim():e)},expression:\"customer_form.user\"}})],1),o(\"el-form-item\",{attrs:{label:\"联系电话\",\"label-width\":\"120px\",required:\"\"}},[o(\"el-input\",{staticStyle:{width:\"400px\"},attrs:{clearable:\"\",placeholder:\"请输入联系电话\",maxlength:\"30\"},model:{value:t.customer_form.phone,callback:function(e){t.$set(t.customer_form,\"phone\",\"string\"===typeof e?e.trim():e)},expression:\"customer_form.phone\"}})],1),o(\"el-form-item\",{attrs:{label:\"所属地区\",\"label-width\":\"120px\",required:\"\"}},[o(\"el-cascader\",{attrs:{placeholder:\"请选择省市区\",options:t.region,props:t.props},on:{change:t.changeCity},model:{value:t.city,callback:function(e){t.city=e},expression:\"city\"}})],1),o(\"el-form-item\",{attrs:{label:\"详细地址\",\"label-width\":\"120px\",required:\"\"}},[o(\"el-input\",{staticStyle:{width:\"400px\"},attrs:{clearable:\"\",placeholder:\"请输入详细地址\",maxlength:\"50\"},model:{value:t.customer_form.address,callback:function(e){t.$set(t.customer_form,\"address\",\"string\"===typeof e?e.trim():e)},expression:\"customer_form.address\"}})],1)],1),o(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[o(\"el-button\",{on:{click:function(e){t.show_dialog=!1}}},[t._v(\"取 消\")]),o(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.add_customer}},[t._v(\"确 定\")])],1)],1)],1)},s=[],n=(o(\"b0c0\"),o(\"a434\"),o(\"a880\"));function r(t){return n[\"a\"].get(\"/company/getSupplier\",t)}function c(){return n[\"a\"].get(\"/common/getRegion\")}function a(t){return n[\"a\"].post(\"/company/addSupplier\",t)}function l(t){return n[\"a\"].put1(\"/company/enableSupplier\",t)}function u(t){return n[\"a\"].post(\"/company/update\",t)}function m(t){return n[\"a\"].get(\"/company/getCompany\",t)}function p(t){return n[\"a\"].put1(\"/company/delSupplier\",t)}var h={data:function(){return{status_list:[{name:\"启用\",value:!0},{name:\"禁用\",value:!1}],customer_name:\"\",customer_phone:\"\",isEnable:\"\",region:[],city:[],customerList:[],regionName:\"\",editIndex:\"\",show_dialog:!1,customer_form:{status:\"\",name:\"\",user:\"\",phone:\"\",city:\"\",address:\"\"},options:[],props:{value:\"code\",label:\"regionName\",children:\"sonRegionList\",checkStrictly:!0}}},mounted:function(){this.getList()},methods:{getList:function(t){var e=this,o={pageNo:t||this.current,pageSize:30,supplierName:this.customer_name,supplierPhone:this.customer_phone};1==this.city.length&&(o.province=this.city[0]),2==this.city.length&&(o.province=this.city[0],o.city=this.city[1]),3==this.city.length&&(o.province=this.city[0],o.city=this.city[1],o.area=this.city[2]),console.log(o),r(o).then((function(t){e.customerList=t.records})),c().then((function(t){e.region=t,console.log(e.region)}))},changeCity:function(){console.log(this.city)},restParams:function(){this.customer_name=\"\",this.customer_phone=\"\",this.isEnable=\"\",this.city=[]},open_add_customer:function(){this.editIndex=\"\",this.customer_form={status:\"\",name:\"\",user:\"\",phone:\"\",city:\"\",address:\"\"},this.show_dialog=!0},add_customer:function(){var t=this,e={isEnable:this.customer_form.status,companyName:this.customer_form.name,companyPhone:this.customer_form.phone,companyAddress:this.customer_form.address,companyContact:this.customer_form.user,companyId:this.customer_form.companyId};1==this.city.length&&(e.province=this.city[0]),2==this.city.length&&(e.province=this.city[0],e.city=this.city[1]),3==this.city.length&&(e.province=this.city[0],e.city=this.city[1],e.area=this.city[2]),console.log(this.customer_form.companyId),this.customer_form.name?this.customer_form.phone?this.customer_form.address?this.customer_form.user?0!=this.city.length?this.customer_form.companyId?u(e).then((function(e){t.$message.success(\"保存成功\"),t.show_dialog=!1,t.city=[],t.getList()})):a(e).then((function(e){t.$message.success(\"添加成功\"),t.city=[],t.show_dialog=!1,t.getList()})):this.$message.error(\"请至少选择一个行政区\"):this.$message.error(\"请输入联系人\"):this.$message.error(\"请输入详细地址\"):this.$message.error(\"请输入手机号\"):this.$message.error(\"请输入供应商名称\")},handleEdit:function(t,e,o){var i=this;this.editIndex=e,m({companyId:e}).then((function(t){i.customer_form={name:t.companyName,phone:t.companyPhone,status:o,user:t.companyContact,address:t.companyAddress,companyId:e},i.city=[],t.province&&i.city.push(t.province),t.city&&i.city.push(t.city),t.area&&i.city.push(t.area),console.log(i.city),i.show_dialog=!0}))},handleDelete:function(t,e){var o=this;console.log(e),this.$confirm(\"此操作将永久删除该供应商, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){p({companyId:e}).then((function(e){o.$message.success(\"删除成功\"),o.customerList.splice(t,1)}))}))},switchCompany:function(t,e,o){var i=this;console.log({companyId:o}),l({companyId:o}).then((function(o){i.$message.success(\"操作成功\"),i.customerList[e].isEnable=t}))},out_supplier_excel:function(){var t={supplierName:this.customer_name,supplierPhone:this.customer_phone,province:\"\",city:\"\",area:\"\"};1==this.city.length&&(t.province=this.city[0]),2==this.city.length&&(t.province=this.city[0],t.city=this.city[1]),3==this.city.length&&(t.province=this.city[0],t.city=this.city[1],t.area=this.city[2]),window.open(\"//192.168.1.155:28081/company/excelOutSupplier?supplier=\"+t.supplierName+\"&supplierPhone=\"+t.supplierPhone+\"&province=\"+t.province+\"&city=\"+t.city+\"&area=\"+t.area+\"&token=\"+this.$store.state.user.token)}}},d=h,y=(o(\"fd0e\"),o(\"2877\")),f=Object(y[\"a\"])(d,i,s,!1,null,\"ed245666\",null);e[\"default\"]=f.exports},d3b1:function(t,e,o){},fd0e:function(t,e,o){\"use strict\";o(\"d3b1\")}}]);","extractedComments":[]}